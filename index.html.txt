<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éé‡‘å¸¸æ˜¥è—¤ï¼šè†æ£˜ç‹å†  (ä¿®å¾©ç‰ˆ)</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap');
        
        body {
            font-family: 'Lato', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
            overflow-x: hidden;
        }
        
        .font-header { font-family: 'Cinzel', serif; }
        .font-prose { font-family: 'Playfair Display', serif; }

        .old-money-scroll {
            scrollbar-width: thin;
            scrollbar-color: #94a3b8 #1e293b;
        }
        .old-money-scroll::-webkit-scrollbar { width: 6px; }
        .old-money-scroll::-webkit-scrollbar-track { background: #1e293b; }
        .old-money-scroll::-webkit-scrollbar-thumb { background-color: #94a3b8; border-radius: 4px; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }

        .glass-panel {
            background: rgba(30, 41, 59, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        /* æ‰‹æ©Ÿæ»‘å‹•å‹•ç•« */
        .phone-overlay {
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- å…§ç½® SVG åœ–æ¨™çµ„ä»¶ (è§£æ±ºå¤–éƒ¨åº«åŠ è¼‰å¤±æ•—å•é¡Œ) ---
        const Icons = {
            Phone: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>,
            X: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Heart: ({filled}) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>,
            Message: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>,
            Send: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>,
            Shield: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>,
            Lock: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
            Camera: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>
        };

        // --- éŠæˆ²æ•¸æ“š ---
        const CHARACTERS = {
            mc: { name: "ç¶­å¤šåˆ©äº", avatar: "https://placehold.co/100x100/pink/white?text=V" },
            alex: { name: "äºæ­·å±±å¤§", avatar: "https://placehold.co/100x100/1e293b/gold?text=A" },
            eli: { name: "ä¼ŠèŠ", avatar: "https://placehold.co/100x100/3f3f46/white?text=E" },
            rex: { name: "ç‘å…‹æ–¯", avatar: "https://placehold.co/100x100/7f1d1d/white?text=R" }
        };

        const INITIAL_FEED = [
            {
                id: 1,
                author: "Gossip Girl 2.0",
                avatar: "https://placehold.co/50x50/000/FFF?text=G",
                content: "è½èªªå¥³ç‹èœ‚ç¶­å¤šåˆ©äºä»Šå¤©å¿ƒæƒ…ä¸å¥½ï¼Ÿå°å¿ƒåˆ¥è¢«èœ‡å‚·äº†ã€‚ #StHelios #QueenV",
                likes: 124,
                comments: [{ user: "User88", text: "å¥¹å“ªå¤©å¿ƒæƒ…å¥½éï¼Ÿ" }],
                isPrivate: false
            }
        ];

        // --- ä¸»çµ„ä»¶ ---
        const Game = () => {
            const [sceneId, setSceneId] = useState('intro');
            const [stats, setStats] = useState({ purity: 50, dominance: 50, lust: 0 });
            const [feed, setFeed] = useState(INITIAL_FEED);
            const [notifications, setNotifications] = useState(0);
            const [isPhoneOpen, setIsPhoneOpen] = useState(false);
            const [history, setHistory] = useState([]);

            const updateStat = (type, value) => setStats(prev => ({ ...prev, [type]: Math.min(100, Math.max(0, prev[type] + value)) }));
            const addPost = (post) => { setFeed(prev => [post, ...prev]); setNotifications(prev => prev + 1); };

            // åŠ‡æƒ…é…ç½®
            const SCENES = {
                'intro': {
                    title: "é¡ä¸­ç«ç‘°",
                    text: [
                        "è–èµ«åˆ©å¥§æ–¯å­¸é™¢çš„æ—©æ™¨ç¸½æ˜¯å¸¶è‘—ä¸€è‚¡æ½®æ¿•çš„éœ§æ°£ã€‚ä½ ç«™åœ¨å…¨é›·å°„é›•åˆ»çš„è½åœ°é¡å‰ï¼Œå¯©è¦–è‘—è‡ªå·±çš„å€’å½±ã€‚",
                        "ä½ æ˜¯ç¶­å¤šåˆ©äºÂ·èŒƒå¾·æ¯”çˆ¾ç‰¹ï¼Œé€™å€‹å­¸é™¢é‡‘å­—å¡”é ‚ç«¯çš„å¥³äººã€‚é¡å­è£¡çš„å°‘å¥³æ“æœ‰ä»¤äººçª’æ¯çš„ç¾è²Œï¼Œä½†çœ¼ç¥ä¸­é€è‘—ä¸€çµ²ä¸æ˜“å¯Ÿè¦ºçš„å‚²æ…¢ã€‚"
                    ],
                    image: "https://placehold.co/600x400/1e293b/FFF?text=Mirror+Scene",
                    options: [
                        { text: "èª¿æ•´é ˜çµï¼Œæˆ‘è¦è®“æ‰€æœ‰äººéƒ½è‡£æœã€‚", action: () => { updateStat('dominance', 10); setSceneId('hallway'); } },
                        { text: "å˜†äº†å£æ°£ï¼Œå…¶å¯¦æœ‰é»ä¸æƒ³å»é¢å°ã€‚", action: () => { updateStat('purity', 10); setSceneId('hallway'); } }
                    ]
                },
                'hallway': {
                    title: "èµ°å»Šçš„è¦–ç·š",
                    text: [
                        "èµ°éä¸»æ•™å­¸æ¨“çš„é•·å»Šï¼Œäººç¾¤è‡ªå‹•åˆ†é–‹ã€‚ä½ èƒ½æ„Ÿå—åˆ°ç„¡æ•¸é“è¦–ç·šé»åœ¨ä½ èº«ä¸Šâ€”â€”ç¾¨æ…•ã€å«‰å¦’ï¼Œé‚„æœ‰èµ¤è£¸è£¸çš„æƒ…æ…¾ã€‚",
                        "æ‰‹æ©Ÿéœ‡å‹•äº†ä¸€ä¸‹ã€‚æ˜¯ã€The Hiveã€çš„æç¤ºéŸ³ã€‚"
                    ],
                    image: "https://placehold.co/600x400/2f3e46/FFF?text=Hallway+Scene",
                    effect: () => {
                        if (!history.includes('hallway_notif')) {
                            setNotifications(prev => prev + 1);
                            setHistory(prev => [...prev, 'hallway_notif']);
                        }
                    },
                    options: [
                        { text: "ç„¡è¦–æ‰‹æ©Ÿï¼Œä¿æŒå„ªé›…ã€‚", action: () => setSceneId('encounter_alex') },
                        { text: "ã€é»æ“Šå³å´æ‰‹æ©Ÿåœ–æ¨™ã€‘æŸ¥çœ‹æ¶ˆæ¯", action: () => { setIsPhoneOpen(true); setSceneId('encounter_alex'); }, style: "border-yellow-500 text-yellow-200" }
                    ]
                },
                'encounter_alex': {
                    title: "å®¿æ•µèˆ‡æœªå©šå¤«",
                    text: [
                        "è½‰è§’è™•ï¼Œä¸€å€‹é«˜å¤§çš„èº«å½±æ“‹ä½äº†å»è·¯ã€‚æ˜¯äºæ­·å±±å¤§ã€‚ä»–ç©¿è‘—è¨‚è£½çš„è¥¿è£æ ¡æœï¼Œé ˜å¸¶é¬†é¬†å®å®ï¼Œçœ¼ç¥åƒæ˜¯åœ¨çœ‹ä¸€ä»¶å±¬æ–¼ä»–çš„æ˜‚è²´æ”¶è—å“ã€‚",
                        "ã€Œæ—©å®‰ï¼Œç¶­å¤šåˆ©äºã€‚ã€ä»–ä½æ²‰çš„è²éŸ³å¸¶è‘—ä¸€çµ²æˆ²è¬”ï¼Œã€Œæ˜¨æ™šæ²’å›æˆ‘è¨Šæ¯ï¼Œæ˜¯åœ¨å¿™è‘—æŒ‘é¸ä»Šå¤©è¦å¯µå¹¸çš„å°è±¡å—ï¼Ÿã€"
                    ],
                    image: "https://placehold.co/600x400/333/gold?text=Alexander",
                    options: [
                        { text: "å†·ç¬‘åæ“Šï¼šã€Œè®“é–‹ï¼Œå¥½ç‹—ä¸æ“‹è·¯ã€‚ã€", action: () => { updateStat('dominance', 15); setSceneId('alex_reaction_dom'); } },
                        { text: "è‡‰ç´…è¿´é¿ï¼šã€Œæˆ‘...æˆ‘åªæ˜¯ç¡è‘—äº†ã€‚ã€", action: () => { updateStat('dominance', -10); setSceneId('alex_reaction_sub'); } }
                    ]
                },
                'alex_reaction_dom': {
                    title: "æ¬ŠåŠ›çš„åšå¼ˆ",
                    text: [
                        "äºæ­·å±±å¤§æ„£äº†ä¸€ä¸‹ï¼Œéš¨å³çœ¼ä¸­çš„èˆˆè¶£æ›´æ¿ƒäº†ã€‚ä»–æ¹Šåˆ°ä½ è€³é‚Šï¼šã€Œé€™å¼µå˜´çœŸæ˜¯è¶Šä¾†è¶Šå²å®³äº†ã€‚ä»Šæ™šæ¸¸æ³³éšŠæœ‰æ´¾å°ï¼Œç©¿å°‘é»ã€‚ã€"
                    ],
                    image: "https://placehold.co/600x400/333/gold?text=Power+Play",
                    options: [{ text: "å‰å¾€æ›´è¡£å®¤æº–å‚™ä¸Šèª²", action: () => setSceneId('locker_room') }]
                },
                'alex_reaction_sub': {
                    title: "çµç‰©çš„è‡ªè¦º",
                    text: [
                        "äºæ­·å±±å¤§æ»¿æ„åœ°ç¬‘äº†ã€‚ä»–æŠŠä½ é€¼åˆ°æ«ƒé–€ä¸Šï¼šã€Œä¹–å¥³å­©ã€‚ä»Šæ™šä¾†æˆ‘çš„å¯¢å®¤ï¼Œæˆ‘éœ€è¦è£œå„Ÿã€‚ã€"
                    ],
                    image: "https://placehold.co/600x400/333/gold?text=Prey",
                    options: [{ text: "é€ƒé›¢ç¾å ´ï¼Œå‰å¾€æ›´è¡£å®¤", action: () => { updateStat('lust', 10); setSceneId('locker_room'); } }]
                },
                'locker_room': {
                    title: "æ›´è¡£å®¤çš„èª˜æƒ‘",
                    text: [
                        "æ›´è¡£å®¤ç©ºç„¡ä¸€äººã€‚ä½ æ›ä¸Šé«”è‚²èª²çš„çŸ­è£™ï¼Œçœ‹è‘—é¡å­ä¸­å®Œç¾çš„æ›²ç·šã€‚ä¸€å€‹å¤§è†½çš„æƒ³æ³•åœ¨è…¦æµ·ä¸­æµ®ç¾ã€‚",
                        "è¦åœ¨ã€The Hiveã€ä¸Šç™¼é»ä»€éº¼å—ï¼Ÿ"
                    ],
                    image: "https://placehold.co/600x400/pink/white?text=Locker+Room",
                    options: [
                        { 
                            text: "ç™¼å¸ƒä¸€å¼µæ­£å¸¸çš„å°é¡è‡ªæ‹", 
                            action: () => {
                                addPost({
                                    id: Date.now(), author: CHARACTERS.mc.name, avatar: CHARACTERS.mc.avatar,
                                    content: "æ—©æ™¨çš„é«”è‚²èª²ã€‚æœ‰é»ç´¯ã€‚ ğŸ¾", likes: 5, comments: [], isPrivate: false
                                });
                                updateStat('purity', 5); setSceneId('class_start');
                            }
                        },
                        { 
                            text: "ã€å¤§è†½ã€‘æ‹‰ä½é ˜å£ï¼Œç™¼å¸ƒæ“¦é‚Šå¿«æ‹ (å¢®è½+)", 
                            action: () => {
                                addPost({
                                    id: Date.now(), author: CHARACTERS.mc.name, avatar: CHARACTERS.mc.avatar,
                                    content: "æœ‰é»ç†±... ğŸ’¦ #Private",
                                    image: "https://placehold.co/300x200/111/pink?text=Censored",
                                    likes: 0, comments: [], isPrivate: true
                                });
                                updateStat('purity', -10); updateStat('lust', 10); setSceneId('social_reaction');
                            },
                            style: "border-rose-500 text-rose-300"
                        }
                    ]
                },
                'social_reaction': {
                    title: "ç¶²çµ¡æ•ˆæ‡‰",
                    text: [
                        "ç…§ç‰‡ç™¼å‡ºå»ä¸åˆ°åç§’ï¼Œæ‰‹æ©Ÿé–‹å§‹ç˜‹ç‹‚éœ‡å‹•ã€‚ä½ æ”¶åˆ°äº†æ–°çš„ç§ä¿¡å’Œå¤§é‡é»è®šã€‚",
                        "è«‹æ‰“é–‹æ‰‹æ©ŸæŸ¥çœ‹åæ‡‰ã€‚"
                    ],
                    image: "https://placehold.co/600x400/000/red?text=Viral",
                    effect: () => { if (!history.includes('dm_rx')) { setNotifications(prev => prev + 3); setHistory(prev => [...prev, 'dm_rx']); } },
                    options: [{ text: "æ‰“é–‹æ‰‹æ©ŸæŸ¥çœ‹", action: () => { setIsPhoneOpen(true); setSceneId('end_demo'); } }]
                },
                'class_start': { title: "å¹³éœçš„èª²ç¨‹", text: ["ä½ é¸æ“‡äº†ä¿æŒä½èª¿ã€‚é›–ç„¶å®‰å…¨ï¼Œä½†ä¹Ÿå°‘äº†ä¸€çµ²åˆºæ¿€ã€‚(DemoçµæŸ-ç´”æ½”ç·š)"], image: "https://placehold.co/600x400/eee/333?text=Classroom", options: [{ text: "é‡ç½®", action: () => window.location.reload() }] },
                'end_demo': { title: "æœªå®Œå¾…çºŒ", text: ["åœ¨æ‰‹æ©Ÿä¸ŠæŸ¥çœ‹ä»–å€‘çš„åæ‡‰å§ã€‚é€™å ´æ¬ŠåŠ›éŠæˆ²æ‰å‰›å‰›é–‹å§‹ã€‚(DemoçµæŸ)"], image: "https://placehold.co/600x400/000/gold?text=The+End", options: [{ text: "é‡ç½®", action: () => window.location.reload() }] }
            };

            useEffect(() => { if (SCENES[sceneId].effect) SCENES[sceneId].effect(); }, [sceneId]);

            const currentScene = SCENES[sceneId];

            // ç‹€æ…‹æ¢çµ„ä»¶
            const StatBar = ({ label, value, color1, color2, icon: Icon }) => (
                <div className="mb-4">
                    <div className="flex justify-between items-center mb-1 text-xs uppercase tracking-widest text-gray-400">
                        <span className="flex items-center gap-1"><Icon /> {label}</span>
                        <span>{value}%</span>
                    </div>
                    <div className="h-2 w-full bg-slate-800 rounded-full overflow-hidden border border-slate-700">
                        <div className="h-full transition-all duration-500" style={{ width: `${value}%`, background: `linear-gradient(90deg, ${color1}, ${color2})` }} />
                    </div>
                </div>
            );

            // æ‰‹æ©ŸAppçµ„ä»¶
            const PhoneApp = () => {
                const [mode, setMode] = useState('feed');
                return (
                    <div className="h-full bg-black text-white flex flex-col font-sans">
                        <div className="px-4 py-3 bg-gray-900 border-b border-gray-800 flex justify-between items-center">
                            <h2 className="font-bold text-lg italic tracking-tighter text-yellow-500">The Hive</h2>
                            <button onClick={() => setMode(mode === 'feed' ? 'dm' : 'feed')} className="p-1 rounded hover:bg-gray-800">
                                {mode === 'feed' ? <Icons.Message /> : <Icons.Camera />}
                            </button>
                        </div>
                        <div className="flex-1 overflow-y-auto old-money-scroll">
                            {mode === 'feed' ? (
                                <div className="space-y-0">
                                    {feed.map(post => (
                                        <div key={post.id} className="border-b border-gray-800 pb-4 bg-gray-950">
                                            <div className="p-3 flex items-center gap-3">
                                                <img src={post.avatar} className="w-8 h-8 rounded-full border border-gray-700" />
                                                <div>
                                                    <p className="font-bold text-sm text-gray-200">{post.author}</p>
                                                    {post.isPrivate && <span className="text-[10px] text-green-400 border border-green-900 px-1 rounded bg-green-900/20">å¯†å‹åœˆ</span>}
                                                </div>
                                            </div>
                                            {post.image && <div className="w-full h-48 bg-gray-900 overflow-hidden"><img src={post.image} className="w-full h-full object-cover opacity-80" /></div>}
                                            <div className="p-3">
                                                <div className="flex gap-3 mb-2 text-gray-400">
                                                    <Icons.Heart filled={post.likes > 10} /> <Icons.Message /> <Icons.Send />
                                                </div>
                                                <p className="text-sm font-semibold">{post.likes + (post.isPrivate ? 69 : 0)} likes</p>
                                                <p className="text-sm text-gray-300"><span className="font-bold mr-2">{post.author}</span>{post.content}</p>
                                                {post.isPrivate && (
                                                    <div className="mt-2 space-y-1 bg-gray-900/50 p-2 rounded">
                                                        <p className="text-xs text-gray-400"><span className="font-bold text-yellow-600">Rex_Rugby</span> ğŸ”¥ è©²æ­»ï¼Œä½ åœ¨æŒ‘é‡æˆ‘ï¼Ÿ</p>
                                                        <p className="text-xs text-gray-400"><span className="font-bold text-blue-400">Eli_Valedictorian</span> æŠŠå®ƒåˆªäº†ï¼Œç¾åœ¨ã€‚</p>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            ) : (
                                <div className="p-4 space-y-2">
                                    <h3 className="text-gray-500 text-xs uppercase mb-2">Direct Messages</h3>
                                    <div className="flex items-center gap-3 p-2 bg-gray-900 rounded border border-gray-800">
                                        <img src={CHARACTERS.alex.avatar} className="w-10 h-10 rounded-full" />
                                        <div className="flex-1">
                                            <p className="font-bold text-sm">Alexander</p>
                                            <p className="text-xs text-gray-400">åˆ¥è®“æˆ‘é‡è¤‡ç¬¬äºŒéã€‚</p>
                                        </div>
                                        <div className="w-2 h-2 bg-blue-500 rounded-full"></div>
                                    </div>
                                    {feed.some(p => p.isPrivate) && (
                                        <div className="flex items-center gap-3 p-2 bg-gray-900 rounded border border-gray-800">
                                            <div className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center">?</div>
                                            <div className="flex-1"><p className="font-bold text-sm text-red-400">Unknown</p><p className="text-xs text-gray-400">å·²æˆªåœ–ã€‚</p></div>
                                            <div className="w-2 h-2 bg-red-500 rounded-full"></div>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-slate-950 flex justify-center items-center p-0 lg:p-8 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] relative overflow-hidden">
                    
                    {/* æ‰‹æ©Ÿç‰ˆï¼šé ‚éƒ¨å°èˆª (åƒ…åœ¨æ‰‹æ©Ÿé¡¯ç¤º) */}
                    <div className="lg:hidden fixed top-0 left-0 right-0 h-16 bg-slate-900/90 backdrop-blur z-40 flex justify-between items-center px-4 border-b border-white/10">
                        <span className="font-header text-yellow-100">Gilded Ivy</span>
                        <button 
                            onClick={() => setIsPhoneOpen(true)}
                            className="text-yellow-500 relative p-2"
                        >
                            <Icons.Phone />
                            {notifications > 0 && <span className="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>}
                        </button>
                    </div>

                    <div className="w-full max-w-6xl h-screen lg:h-[85vh] flex gap-6 relative mt-16 lg:mt-0">
                        
                        {/* å·¦å´ï¼šæ•…äº‹ä¸»èˆå° */}
                        <div className="flex-1 glass-panel lg:rounded-lg shadow-2xl flex flex-col w-full">
                            <div className="hidden lg:flex h-16 border-b border-white/10 items-center justify-between px-6 bg-slate-900/50">
                                <h1 className="font-header text-xl text-yellow-100 tracking-widest uppercase">
                                    éé‡‘å¸¸æ˜¥è—¤ <span className="text-xs normal-case text-yellow-600 ml-2">The Crown of Thorns</span>
                                </h1>
                            </div>

                            <div className="flex-1 overflow-y-auto old-money-scroll p-6 lg:p-10 flex flex-col animate-fade-in pb-24 lg:pb-10">
                                <div className="w-full h-64 lg:h-80 bg-black rounded-sm border-2 border-slate-800 mb-6 overflow-hidden relative group shrink-0">
                                    <img src={currentScene.image} className="w-full h-full object-cover opacity-80" />
                                    <div className="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-slate-950 to-transparent"></div>
                                    <div className="absolute bottom-4 left-4 font-header text-lg text-yellow-50">{currentScene.title}</div>
                                </div>
                                
                                <div className="font-prose text-lg lg:text-xl leading-relaxed text-slate-300 space-y-4 mb-8">
                                    {currentScene.text.map((p, i) => <p key={i}>{p}</p>)}
                                </div>

                                <div className="mt-auto space-y-3">
                                    {currentScene.options.map((opt, i) => (
                                        <button key={i} onClick={opt.action} className={`w-full p-4 text-left border border-slate-600 bg-slate-900/50 hover:bg-slate-800 transition-all ${opt.style || ''}`}>
                                            <span className="font-header text-yellow-600 mr-2">â–</span> {opt.text}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* å³å´ï¼šæ‰‹æ©Ÿ/å±¬æ€§é¢æ¿ (æ¡Œé¢ç«¯é¡¯ç¤ºï¼Œæ‰‹æ©Ÿç«¯ç‚ºè¦†è“‹å±¤) */}
                        <div className={`
                            fixed inset-0 z-50 lg:static lg:z-auto lg:w-80 lg:block
                            bg-slate-950 lg:bg-transparent flex flex-col gap-4
                            phone-overlay
                            ${isPhoneOpen ? 'translate-y-0' : 'translate-y-full lg:translate-y-0'}
                        `}>
                            {/* æ‰‹æ©Ÿç‰ˆï¼šé—œé–‰æŒ‰éˆ•å€åŸŸ */}
                            <div className="lg:hidden pt-4 px-4 pb-2 flex justify-end bg-slate-900 border-b border-slate-800">
                                <button onClick={() => setIsPhoneOpen(false)} className="text-white p-2 bg-slate-800 rounded-full">
                                    <Icons.X />
                                </button>
                            </div>

                            {/* å±¬æ€§é¢æ¿ */}
                            <div className="glass-panel p-6 lg:rounded-lg shrink-0">
                                <div className="flex items-center gap-4 mb-6">
                                    <img src={CHARACTERS.mc.avatar} className="w-16 h-16 rounded-full border-2 border-yellow-600/50 p-1" />
                                    <div>
                                        <h3 className="font-header text-yellow-100">{CHARACTERS.mc.name}</h3>
                                        <p className="text-xs text-slate-400">Class of 2026</p>
                                    </div>
                                </div>
                                <StatBar label="ç´”æ½”" value={stats.purity} color1="#3b82f6" color2="#ef4444" icon={Icons.Shield} />
                                <StatBar label="æ”¯é…" value={stats.dominance} color1="#a855f7" color2="#f472b6" icon={Icons.Lock} />
                                {stats.lust > 0 && <StatBar label="æ…¾æœ›" value={stats.lust} color1="#be123c" color2="#be123c" icon={Icons.Heart} />}
                            </div>

                            {/* æ¨¡æ“¬æ‰‹æ©Ÿç•Œé¢ */}
                            <div className="flex-1 bg-black lg:rounded-[2rem] lg:border-4 lg:border-slate-700 overflow-hidden shadow-2xl relative flex flex-col">
                                <div className="hidden lg:block absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-slate-800 rounded-b-xl z-20"></div>
                                <PhoneApp />
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Game />);
    </script>
</body>
</html>


